(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{48:function(e,t,a){e.exports=a(79)},77:function(e,t,a){e.exports=a.p+"static/media/icon.528f75c9.png"},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(6),o=a.n(c),i=a(5),s=a(4),l=a.n(s),u=a(9),f=a(19),v=a(21),m=a(107),p=a(23),d=a(12);var h=a(24),y=a(25),g=a.n(y);var E,w={loadFromStorage:function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):null},saveToStorage:function(e,t){localStorage[e]=JSON.stringify(t)}},b={getWeather:function(e,t){return k.apply(this,arguments)},getAutoComplete:function(e){return N.apply(this,arguments)},getCityByCoords:function(e,t){return j.apply(this,arguments)},loadFavorites:function(){(O=w.loadFromStorage("favorites"))&&O.length||(O=[]);return O},addFavorite:function(e,t,a){return e.cityName=t,e.key=a,O=[].concat(Object(h.a)(O),[e]),w.saveToStorage("favorites",O),e},removeFavorite:function(e){return O=O.filter((function(t){return t.key!==e})),w.saveToStorage("favorites",O),e},isStorage:function(){return!!w.loadFromStorage("weather")}},O=[];function j(){return(j=Object(u.a)(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=g.a.get("https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=z0766gk3hrdKoJ0iTWMryRUvQAuQYgkj&q=".concat(t,",").concat(a)),e.abrupt("return",r);case 5:throw e.prev=5,e.t0=e.catch(0),console.log(e.t0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function k(){return(k=Object(u.a)(l.a.mark((function e(t,a){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}if(!(E=w.loadFromStorage("weather"))){e.next=4;break}return e.abrupt("return",E);case 4:e.next=8;break;case 6:return r=g.a.get("http://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=s9LG1iE1JYDKGH9A5AeujArIo8xOyqjR&language=en-us&details=false&metric=false")),e.abrupt("return",r.then((function(e){return e.data.cityName=a,e.data.key=t,w.saveToStorage("weather",e.data),e.data})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.a.get("http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=s9LG1iE1JYDKGH9A5AeujArIo8xOyqjR&q=".concat(t,"&language=en-us")),e.abrupt("return",a.then((function(e){return e.data})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=e.getWeather,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},a=Object(r.useState)(e),n=Object(v.a)(a,2),c=n[0],o=n[1];return Object(r.useEffect)((function(){t(c)}),[c]),[c,function(e){if(e){var t="number"===e.target.type?+e.target.value:e.target.value;o(Object(d.a)(Object(d.a)({},c),{},Object(p.a)({},e.target.name,t)))}else o({location:""})}]}({location:""}),c=Object(v.a)(a,2),o=c[0],i=c[1],s=Object(r.useState)([]),f=Object(v.a)(s,2),h=f[0],y=f[1];function g(){return(g=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.location){e.next=4;break}y([]),e.next=8;break;case 4:return e.next=6,b.getAutoComplete(o.location);case 6:t=e.sent,y(t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){!function(){g.apply(this,arguments)}()}),[o]);var E=o.location;return n.a.createElement("div",{className:"search-container flex justify-center align-center center"},n.a.createElement("form",{autoComplete:"off"},n.a.createElement(m.a,{value:E,label:"Search for city...",name:"location",onChange:i})),n.a.createElement("ul",null,h.length>0&&h.slice(0,3).map((function(e){return n.a.createElement("li",{key:e.Key},e.LocalizedName,",",e.Country.LocalizedName," ",n.a.createElement("i",{onClick:function(a){return r=e.Key,n=e.LocalizedName,t(r,n),y([]),void i();var r,n},className:"fas fa-plus-circle"}))}))))}var F=a(43),S=a.n(F);function A(e){var t,a=e.day;return n.a.createElement("div",{className:"preview-container flex column"},n.a.createElement("div",{className:"img-container"},n.a.createElement("img",{src:(t=a.Day.Icon,t<10&&(t="0"+t),"https://developer.accuweather.com/sites/default/files/".concat(t,"-s.png")),alt:""})),n.a.createElement("div",{className:"info-container"},n.a.createElement("h3",null,S()(new Date(a.Date)).format("L")),n.a.createElement("p",{className:"description"},a.Day.IconPhrase),n.a.createElement("p",null,a.Temperature.Minimum.Value,"\xb0-",a.Temperature.Maximum.Value,"\xb0"),n.a.createElement("a",{href:a.Link,target:"_blank",rel:"noopener noreferrer"}," ",n.a.createElement("i",{className:"fas fa-info-circle"})," Read More")))}function T(e){var t=e.weather,a=e.cityKey,r=e.toggleFavorite,c=e.favorites;return n.a.createElement("div",{className:"list-container"},n.a.createElement("i",{className:"far fa-heart",style:function(){if(-1!==c.findIndex((function(e){return e.key===a})))return{fontWeight:"700"}}(),onClick:function(e){return r(t,t.cityName,a)}}),n.a.createElement("h1",null,t.Headline.Text," at ",n.a.createElement("span",{className:"city"},t.cityName)),n.a.createElement("section",{className:"weather-list"},t.DailyForecasts.map((function(e,t){return n.a.createElement(A,{key:t,day:e})}))))}function R(e){return function(){var t=Object(u.a)(l.a.mark((function t(a){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=b.removeFavorite(e),a({type:"REMOVE_FAVORITE",favoriteKey:r}),t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("weatherActions: couldn't remove favorite"),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function _(){return function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.loadFavorites();case 3:a=e.sent,t({type:"SET_FAVORITES",favorites:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("weatherActions: couldn't load favorites"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}var C={loadWeather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var a=Object(u.a)(l.a.mark((function a(r){var n;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.getWeather(e,t);case 3:n=a.sent,r({type:"SET_WEATHER",weather:n}),a.next=11;break;case 7:throw a.prev=7,a.t0=a.catch(0),console.log("weatherActions: couldn't load weather"),a.t0;case 11:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},addFavorite:function(e,t,a){return function(){var r=Object(u.a)(l.a.mark((function r(n){var c;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,console.log(e),c=b.addFavorite(e,t,a),n({type:"ADD_FAVORITE",favorite:c}),r.next=10;break;case 6:throw r.prev=6,r.t0=r.catch(0),console.log("weatherActions: couldn't add favorite"),r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()},loadFavorites:_,removeFavorite:R},I=Object(f.b)((function(e){return{weather:e.weatherReducer.weather,favorites:e.weatherReducer.favorites}}),C)((function(e){var t=e.loadWeather,a=e.weather,c=e.addFavorite,o=e.favorites,i=e.removeFavorite,s=e.loadFavorites;function f(e){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(l.a.mark((function e(t){var a,r,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.coords,r=a.latitude,n=a.longitude,e.next=3,b.getCityByCoords(r,n);case 3:m((c=e.sent).data.ParentCity.Key,c.data.ParentCity.LocalizedName);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){return p.apply(this,arguments)}function p(){return(p=Object(u.a)(l.a.mark((function e(a,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(a,r);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){b.isStorage()?t():navigator.geolocation.getCurrentPosition(f),s()}),[s,t]),n.a.createElement(n.a.Fragment,null,n.a.createElement(x,{getWeather:m}),a&&Object.keys(a).length>0&&n.a.createElement(T,{favorites:o,cityKey:a.key,toggleFavorite:function(e,t,a){-1===o.findIndex((function(e){return e.key===a}))?c(e,t,a):i(a)},weather:a,cityName:a.cityName}))})),D=a(17);var W=Object(i.f)((function(){return Object(r.useEffect)((function(){var e=document.querySelector(".navbar-container");window.onscroll=function(){window.pageYOffset>0?e.classList.add("scrolled"):e.classList.remove("scrolled")}}),[]),n.a.createElement("div",{className:"full main-container navbar-container"},n.a.createElement(D.b,{to:"/"},n.a.createElement("div",{className:"logo"},n.a.createElement("img",{src:a(77),alt:"logo_img"}))),n.a.createElement("ul",{className:"nav-list flex"},n.a.createElement("li",{className:"item-list"},n.a.createElement(D.b,{to:"/"},"Home")),n.a.createElement("li",{className:"item-list"},n.a.createElement(D.b,{to:"/favorite"},"Favorites"))))}));function L(e){var t=e.favorite,a=e.removeFavorite;return n.a.createElement("div",{className:"favorite-list center flex column justify-center align-center main-container full"},n.a.createElement("i",{onClick:function(e){return a(t.key)},className:"fas fa-trash"}),n.a.createElement("h1",null,t.cityName),n.a.createElement("div",{className:"favorite-preview flex"},t.DailyForecasts.map((function(e,t){return n.a.createElement(A,{key:t,day:e})}))))}var V={loadFavorites:_,removeFavorite:R},K=Object(f.b)((function(e){return{favorites:e.weatherReducer.favorites}}),V)((function(e){var t=e.loadFavorites,a=e.favorites,c=e.removeFavorite;return Object(r.useEffect)((function(){t()}),[t]),n.a.createElement("div",{className:"favorite-container"},a.length?a.map((function(e){return n.a.createElement(L,{key:e.key,favorite:e,removeFavorite:c})})):n.a.createElement("h1",{className:"center"},"No Favorites yet..."))}));var J=function(){return n.a.createElement("div",{className:"App main-container"},n.a.createElement(W,null),n.a.createElement(i.c,null,n.a.createElement(i.a,{component:K,path:"/favorite"}),n.a.createElement(i.a,{component:I,path:"/"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=a(18),H=a(44),q={weather:[],favorites:[]};var z=Object(M.c)({weatherReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WEATHER":return Object(d.a)(Object(d.a)({},e),{},{weather:t.weather});case"ADD_FAVORITE":return Object(d.a)(Object(d.a)({},e),{},{favorites:[].concat(Object(h.a)(e.favorites),[t.favorite])});case"REMOVE_FAVORITE":return Object(d.a)(Object(d.a)({},e),{},{favorites:e.favorites.filter((function(e){return e.key!==t.favoriteKey}))});case"SET_FAVORITES":return Object(d.a)(Object(d.a)({},e),{},{favorites:t.favorites});default:return e}}}),G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||M.d,P=Object(M.e)(z,G(Object(M.a)(H.a)));P.subscribe((function(){console.log("Global state is:",P.getState())}));a(78);o.a.render(n.a.createElement(f.a,{store:P},n.a.createElement(D.a,null,n.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.05f82e27.chunk.js.map